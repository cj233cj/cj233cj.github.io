{% extends "base.html" %}

{% block title %}Search | {{ SITENAME }}{% endblock %}
{% set current = "search" %}

{% block content %}

<div class="relative mb-12 md:mt-14 text-zinc-800 dark:text-zinc-300">
  <h1 class="flex font-bold my-10 text-4xl mb-12 md:my-12 text-zinc-800 dark:text-zinc-300">
    Search&nbsp;
    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
      stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="11" cy="11" r="8"></circle>
      <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
  </h1>

  <!-- Google site search form: results open in a new tab -->
  <form action="https://www.google.com/search" method="get" target="_blank" class="stork-wrapper">
    <!-- Replace example.com with your domain (or leave empty to search the whole web) -->
    <input type="hidden" name="q" id="gsite-query" value="">
    <input type="hidden" name="sitesearch" value="cj233cj.github.io">

    <input
      class="font-semibold h-10 w-full border-2 border-zinc-500 bg-zinc-100 dark:bg-zinc-800 placeholder-zinc-400 dark:placeholder-zinc-300 focus:border-zinc-500 focus:outline-none rounded-lg pl-4"
      id="gsite-input"
      placeholder=" Search â†µ"
      aria-label="search"
      autocomplete="off"
      type="search"
    >

    <div class="mt-2">
      <button type="submit"
        class="px-4 py-2 mr-2 bg-zinc-200 dark:bg-zinc-700 rounded">Search (new tab)</button>
      <button type="button" id="gsite-clear"
        class="px-3 py-2 bg-transparent text-sm">Clear</button>
    </div>
  </form>
</div>

<script>
  // Put search terms into the q parameter as "term site:example.com"
  (function(){
    const input = document.getElementById('gsite-input');
    const hidden = document.getElementById('gsite-query');
    const clearBtn = document.getElementById('gsite-clear');

    function sync() {
      const term = input.value.trim();
      const site = 'cj233cj.github.io'; // change to your domain or set to '' to search web
      hidden.value = term ? term + (site ? ' site:' + site : '') : '';
    }

    input.addEventListener('input', sync);
    input.addEventListener('keydown', function(e){
      if (e.key === 'Enter') {
        sync();
        // allow form submit to open new tab
      }
    });

    clearBtn.addEventListener('click', function(){
      input.value = '';
      sync();
      input.focus();
    });

    // initialize
    sync();
  })();
</script>

{% endblock %}
